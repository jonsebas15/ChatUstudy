<ion-header>
  <ion-toolbar>
    <ion-title>Calendario de tareas</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/principal/chats"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
    <ion-button fill="clear" (click)="prevMonth()">◀</ion-button>
    <div style="font-weight:600;color:black">{{ year }} - {{ month + 1 }}</div>
    <ion-button fill="clear" (click)="nextMonth()">▶</ion-button>
  </div>

  <div style="display:grid;grid-template-columns:repeat(7,1fr);gap:6px;text-align:center;font-weight:600;color:black">
    <div>Dom</div><div>Lun</div><div>Mar</div><div>Mié</div><div>Jue</div><div>Vie</div><div>Sáb</div>
  </div>

  <div style="display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:8px">
    <ng-container *ngFor="let cell of days">
      <div *ngIf="!cell" style="min-height:72px;border:1px solid #eee;background:#B6E2A1"></div>
      <div *ngIf="cell" (click)="showDay(cell)"
           style="min-height:72px;border:1px solid #ddd;padding:6px;cursor:pointer;position:relative">
        <div style="position:absolute;top:6px;right:6px;font-size:12px;color:#666">{{ cell.date.getDate() }}</div>
        <div *ngIf="cell.events.length" style="margin-top:20px">
          <div *ngFor="let e of cell.events" style="background:#fffae6;border-left:4px solid #f0c330;padding:4px;margin-bottom:4px;font-size:13px">
            {{ e.title }}
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <div style="margin-top:12px">
    <ion-button (click)="addExampleEvent()">Agregar ejemplo (profesor → johan 2025-11-15)</ion-button>
  </div>
</ion-content>